# 게시판 서비스

## 기능 요구사항

- 게시글 작성 기능
  - 게시글은 게시글의 ID, 제목, 본문, 생성날짜로 구성된다.
- 게시글 목록 조회 기능
- 게시글 내용 상세 조회 기능
  - 상세 조회 시 연관 게시글을 같이 표시해야 한다.
- 하나의 게시글은 여러 개의 연관 게시글을 가질 수 있으며, 없을 수도 있다.

연관 게시글의 조건은 아래와 같다.

- 설정 기준
  - 게시글의 내용을 단어별로 나눠 각 단어가 다른 게시글에 얼마나 많이 나타나는 지 
  - 통상 문장에 사용되는 단어를 배제하기 위해 전체 게시글에서 60% 이상의 게시글에서 발견되는 단어는 기준으로 설정하지 않는다.
  - 전체 게시글의 40% 이하 빈도 단어가 2개 이상 동시에 나타난다면, 연관 게시글로 설정한다.
  - 전체 게시글의 40% 이하 빈도 단어가 더 자주 사용될 수록, 연관도가 더 높은 것으로 계산한다.
  - 연관 게시글에서 연관 단어가 비연관 단어보다 사용 빈도가 더 많을 수록 연관도가 더 높은 것으로 계산한다.

---

## 구현

- [x] 게시글 작성 기능
  - 게시글 제목, 본문을 입력한다.
- [x] 게시글 목록 조회 기능
  - 작성 된 게시글을 목록을 조회한다. 게시글 ID, 제목, 본문, 생성날짜로 구성된다.
- [x] 게시글 본문 상세 조회 기능
  - 클릭한 게시글의 본문 내용과 함께, 연관 게시글을 같이 표시해야 한다.
  
> 1. 연관 게시글 설정을 위한 테이블

- `전체 게시글 갯수를 기록할 테이블`
- `전체 게시글 통합 단어 사용 횟수를 기록할 테이블`
  - 상세 조회한 게시글에 사용된 단어 중  
    해당 테이블에서 `(전체 게시글 갯수 x 0.4의 횟수)` 이하 단어를 필터링 한다.
  - index 설정 필요
- `각 게시글 별 본문 사용 단어와, 사용 횟수를 기록할 테이블`
  - 위에서 필터링한 단어를 사용한 `게시글id, 단어, 게시글에서의 사용횟수`를 추출한다.
  - index 설정 필요

> 2. 추출한 데이터 저장

- 임시 저장 Map
  - `key : 게시글id, value : 게시글 정보, 조회횟수, 우선순위큐(연관단어(word, count))` 를 갖는 객체로 저장
- 연관 게시글 리스트. 우선순위큐
  - 추출 기준 :
    1. Map을 순회하며 연관 단어 사용 빈도 수 >= 2 인 경우
    2. 조회를 시작한 게시글은 연관 게시글에서 제외
  - 비교 기준 :
    1. 연관 단어 사용 빈도 수가 높을 수록 높은 우선 순위를 가진다.
    2. 빈도 수가 동일하다면, 가장 많이 사용 된 연관 단어의 갯수끼리 비교한다.
    3. 연관 단어의 갯수가 동일하다면, 다음 연관 단어를 가져와 비교한다.
    4. 연관 단어의 빈도 수가 동일하며, 연관 단어의 사용 횟수로 비교가 불가능한 경우, 동일한 우선순위로 설정한다.

### 데이터 가공 흐름

![image](https://user-images.githubusercontent.com/81552729/236665959-98b12c38-610f-4fd0-a1b4-f94e175941f3.png)

## 개선점

- 불용어 처리
  - 무의미한 단어와 조사 등을 제외하는 처리하여 단어로 인식하도록 변경 
- 예외 처리
  - 사용자의 글자 수 입력 제한 및 DB 예외 처리, 오류page 제작
- 기능 개선
  - 수정, 삭제 기능 -> 게시글 저장 시 했던 작업에 대한 추가 처리 필요
  - 검색 기능 -> 풀텍스트 인덱스 적용 필요
  - 페이징 처리 기능
